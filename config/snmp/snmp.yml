# SNMP Exporter configuration for TL-SG2210P switch (192.168.1.4)
# NOTE: Change the community string to match your switch configuration.
modules:
  if_mib:
    version: 2
    auth:
      community: public
    walk:
      # system
      - 1.3.6.1.2.1.1
      # interfaces (IF-MIB)
      - 1.3.6.1.2.1.2
      # ifXTable (high capacity counters, names)
      - 1.3.6.1.2.1.31.1.1
    lookups:
      # Replace ifIndex with human-readable ifName and ifAlias when available
      - source_indexes: [ifIndex]
        lookup: ifName
      - source_indexes: [ifIndex]
        lookup: ifAlias
        regex_extracts:
          ifAlias:
            - regex: '^(.*)$'
              value: '$1'

  # TP-Link specific/extended metrics
  # This module walks the TP-LINK enterprise tree and a few relevant standard MIBs
  # like PoE, Bridge, Q-Bridge, and LLDP to expose vendor features
  # IMPORTANT: The SNMP Exporter does not use textual MIB files at runtime; it
  # only needs numeric OIDs here. The provided MIBs are useful for the generator
  # tool if you later want a finely-tuned config with named symbols.
  tplink:
    version: 2
    auth:
      community: public
    walk:
      # TP-LINK enterprise OID subtree (covers many tplink-*.mib objects)
      - 1.3.6.1.4.1.11863
      # POWER-ETHERNET-MIB (PoE ports, power status)
      - 1.3.6.1.2.1.105
      # BRIDGE-MIB (spanning-tree, MAC tables summary)
      - 1.3.6.1.2.1.17
      # Q-BRIDGE-MIB (VLAN information)
      - 1.3.6.1.2.1.17.7
      # LLDP-MIB (neighbor info)
      - 1.0.8802.1.1.2
    lookups:
      - source_indexes: [ifIndex]
        lookup: ifName
      - source_indexes: [ifIndex]
        lookup: ifAlias
